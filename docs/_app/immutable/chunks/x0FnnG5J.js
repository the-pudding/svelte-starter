import{ao as U,Y as A,F as z,D as H,ap as R,an as d,aq as C,b as f,ar as N,k as G,x as c,y as J,as as F,at as I,au as K,av as y,aw as m,ax as L,ay as X,w as T,v as w,c as O,h as v,a as $,ak as Q,az as B,s as P,aA as Z,al as ee,o as te,E as re,j as se,aB as S,aC as ne,aD as ie,aE as M,P as ae,aF as oe,aG as g,aH as ue,aI as ce,aJ as j,aK as le,p as fe,ab as V,aL as he,_ as de}from"./BtotkuSx.js";import{s as _e,g as pe}from"./Dnd4mSLs.js";function ve(t){let e=0,r=C(0),s;return()=>{U()&&(A(r),z(()=>(e===0&&(s=H(()=>t(()=>R(r)))),e+=1,()=>{d(()=>{e-=1,e===0&&(s?.(),s=void 0,R(r))})})))}}var ge=te|re;function Re(t,e,r,s){new be(t,e,r,s)}class be{parent;is_pending=!1;transform_error;#t;#v=v?O:null;#n;#c;#e;#i=null;#r=null;#s=null;#a=null;#l=0;#u=0;#f=!1;#h=new Set;#d=new Set;#o=null;#y=ve(()=>(this.#o=C(this.#l),()=>{this.#o=null}));constructor(e,r,s,i){this.#t=e,this.#n=r,this.#c=n=>{var u=f;u.b=this,u.f|=N,s(n)},this.parent=f.b,this.transform_error=i??this.parent?.transform_error??(n=>n),this.#e=G(()=>{if(v){const n=this.#v;$();const u=n.data===Q;if(n.data.startsWith(B)){const a=JSON.parse(n.data.slice(B.length));this.#E(a)}else u?this.#T():this.#m()}else this.#g()},ge),v&&(this.#t=O)}#m(){try{this.#i=c(()=>this.#c(this.#t))}catch(e){this.error(e)}}#E(e){const r=this.#n.failed;r&&(this.#s=c(()=>{r(this.#t,()=>e,()=>()=>{})}))}#T(){const e=this.#n.pending;e&&(this.is_pending=!0,this.#r=c(()=>e(this.#t)),d(()=>{var r=this.#a=document.createDocumentFragment(),s=se();r.append(s),this.#i=this.#p(()=>(S.ensure(),c(()=>this.#c(s)))),this.#u===0&&(this.#t.before(r),this.#a=null,T(this.#r,()=>{this.#r=null}),this.#_())}))}#g(){try{if(this.is_pending=this.has_pending_snippet(),this.#u=0,this.#l=0,this.#i=c(()=>{this.#c(this.#t)}),this.#u>0){var e=this.#a=document.createDocumentFragment();J(this.#i,e);const r=this.#n.pending;this.#r=c(()=>r(this.#t))}else this.#_()}catch(r){this.error(r)}}#_(){this.is_pending=!1;for(const e of this.#h)F(e,ne),I(e);for(const e of this.#d)F(e,ie),I(e);this.#h.clear(),this.#d.clear()}defer_effect(e){K(e,this.#h,this.#d)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#n.pending}#p(e){var r=f,s=M,i=ae;y(this.#e),m(this.#e),L(this.#e.ctx);try{return e()}catch(n){return X(n),null}finally{y(r),m(s),L(i)}}#b(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(e);return}this.#u+=e,this.#u===0&&(this.#_(),this.#r&&T(this.#r,()=>{this.#r=null}),this.#a&&(this.#t.before(this.#a),this.#a=null))}update_pending_count(e){this.#b(e),this.#l+=e,!(!this.#o||this.#f)&&(this.#f=!0,d(()=>{this.#f=!1,this.#o&&oe(this.#o,this.#l)}))}get_effect_pending(){return this.#y(),A(this.#o)}error(e){var r=this.#n.onerror;let s=this.#n.failed;if(!r&&!s)throw e;this.#i&&(w(this.#i),this.#i=null),this.#r&&(w(this.#r),this.#r=null),this.#s&&(w(this.#s),this.#s=null),v&&(P(this.#v),Z(),P(ee()));var i=!1,n=!1;const u=()=>{if(i){ce();return}i=!0,n&&ue(),this.#s!==null&&T(this.#s,()=>{this.#s=null}),this.#p(()=>{S.ensure(),this.#g()})},l=a=>{try{n=!0,r?.(a,u),n=!1}catch(o){g(o,this.#e&&this.#e.parent)}s&&(this.#s=this.#p(()=>{S.ensure();try{return c(()=>{var o=f;o.b=this,o.f|=N,s(this.#t,()=>a,()=>u)})}catch(o){return g(o,this.#e.parent),null}}))};d(()=>{var a;try{a=this.transform_error(e)}catch(o){g(o,this.#e&&this.#e.parent);return}a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(l,o=>g(o,this.#e&&this.#e.parent)):l(a)})}}function Ne(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const ye=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Fe(t){return ye.includes(t)}const me={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Ie(t){return t=t.toLowerCase(),me[t]??t}const Ee=["touchstart","touchmove"];function Le(t){return Ee.includes(t)}const Te=["textarea","script","style","title"];function Oe(t){return Te.includes(t)}const h=Symbol("events"),we=new Set,Se=new Set;function ke(t,e,r,s={}){function i(n){if(s.capture||Ae.call(e,n),!n.cancelBubble)return le(()=>r?.call(this,n))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?d(()=>{e.addEventListener(t,i,s)}):e.addEventListener(t,i,s),i}function Be(t,e,r,s={}){var i=ke(e,t,r,s);return()=>{t.removeEventListener(e,i,s)}}function Pe(t,e,r){(e[h]??={})[t]=r}function Ve(t){for(var e=0;e<t.length;e++)we.add(t[e]);for(var r of Se)r(t)}let Y=null;function Ae(t){var e=this,r=e.ownerDocument,s=t.type,i=t.composedPath?.()||[],n=i[0]||t.target;Y=t;var u=0,l=Y===t&&t[h];if(l){var a=i.indexOf(l);if(a!==-1&&(e===document||e===window)){t[h]=e;return}var o=i.indexOf(e);if(o===-1)return;a<=o&&(u=a)}if(n=i[u]||t.target,n!==e){j(t,"currentTarget",{configurable:!0,get(){return n||r}});var W=M,q=f;m(null),y(null);try{for(var _,D=[];n!==null;){var E=n.assignedSlot||n.parentNode||n.host||null;try{var x=n[h]?.[s];x!=null&&(!n.disabled||t.target===n)&&x.call(n,t)}catch(p){_?D.push(p):_=p}if(t.cancelBubble||E===e||E===null)break;n=E}if(_){for(let p of D)queueMicrotask(()=>{throw p});throw _}}finally{t[h]=e,delete t.currentTarget,m(W),y(q)}}}let b=!1,k=Symbol();function Ye(t,e,r){const s=r[e]??={store:null,source:he(void 0),unsubscribe:V};if(s.store!==t&&!(k in r))if(s.unsubscribe(),s.store=t??null,t==null)s.source.v=void 0,s.unsubscribe=V;else{var i=!0;s.unsubscribe=_e(t,n=>{i?s.source.v=n:de(s.source,n)}),i=!1}return t&&k in r?pe(t):A(s.source)}function Ce(){const t={};function e(){fe(()=>{for(var r in t)t[r].unsubscribe();j(t,k,{enumerable:!1,value:!0})})}return[t,e]}function Me(t){var e=b;try{return b=!1,[t(),b]}finally{b=e}}export{we as a,Re as b,Le as c,Me as d,Ye as e,Ne as f,Pe as g,Ae as h,Oe as i,Ve as j,ke as k,Fe as l,ve as m,Ie as n,Be as o,Se as r,Ce as s};
