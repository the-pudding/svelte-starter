import{k as T,h,a as b,o as _,aj as d,J as A,ak as g,al as E,s as R,m as o,c as p,am as N,F as B,D,an as F,a6 as I}from"./BtotkuSx.js";import{B as S}from"./B6475YyI.js";function k(s,r,i=!1){h&&b();var u=new S(s),n=i?_:0;function a(t,c){if(h){const e=d(s);var f;if(e===A?f=0:e===g?f=!1:f=parseInt(e.substring(1)),t!==f){var l=E();R(l),u.anchor=l,o(!1),u.ensure(t,c),o(!0);return}}u.ensure(t,c)}T(()=>{var t=!1;r((c,f=0)=>{t=!0,a(f,c)}),t||a(!1,null)},n)}function w(s,r,i){var u;h&&(u=p,b());var n=new S(s);T(()=>{var a=r()??null;if(h){var t=d(u),c=t===A,f=a!==null;if(c!==f){var l=E();R(l),n.anchor=l,o(!1),n.ensure(a,a&&(e=>i(e,a))),o(!0);return}}n.ensure(a,a&&(e=>i(e,a)))},_)}function v(s,r){return s===r||s?.[I]===r}function x(s={},r,i,u){return N(()=>{var n,a;return B(()=>{n=a,a=[],D(()=>{s!==i(...a)&&(r(s,...a),n&&v(i(...n),s)&&r(null,...n))})}),()=>{F(()=>{a&&v(i(...a),s)&&r(null,...a)})}}),s}export{x as b,w as c,k as i};
